<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Thilanka Munasinghe">

    <title>Thilanka Munasinghe | Google Summer of Code 2017 Proposal</title>

    <!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/navnbar-fixed-size.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/freelancer.css" rel="stylesheet">
    <link href="css/thumbnail-gallery.css" rel="stylesheet">
 
    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<!--    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
-->    <link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

<!--<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">-->
 <link href="css/thilanka.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load('current', {'packages':['gantt']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {

      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Task ID');
      data.addColumn('string', 'Task Name');
      data.addColumn('string', 'Resource');
      data.addColumn('date', 'Start Date');
      data.addColumn('date', 'End Date');
      data.addColumn('number', 'Duration');
      data.addColumn('number', 'Percent Complete');
      data.addColumn('string', 'Dependencies');

      data.addRows([
        ['1', 'Getting familiar with Android Things API', null,
         new Date(2017, 2, 15), new Date(2017, 3, 30), null, 50, null],
        ['2', 'Refining the Project with Mentors', null,
         new Date(2017, 3, 01), new Date(2017, 4, 30), null, 0, null],
        ['3', 'Developing the Android Things Component', null,
         new Date(2017, 4, 1), new Date(2017, 6, 1), null, 0, null],
        ['4', 'Creating the necessary Blockly Components', null,
         new Date(2017, 5, 1), new Date(2017, 5, 15), null, 0, null],
        ['5', 'Utilizing M2M & Weave for IoT Devices', null,
         new Date(2017, 5, 1), new Date(2017, 6, 15), null, 0, null],
        ['6', 'Documentation', null,
         new Date(2017, 6, 1), new Date(2017, 7, 15), null, 0, null],
        ['7', 'Testing', null,
         new Date(2017, 6, 1), new Date(2017, 6, 30), null, 0, null],
        ['8', 'Fine-tune the Things Component', null,
         new Date(2017, 6, 1), new Date(2017, 6, 30), null, 0, null],
        ['9', 'IoT App #1: Weather Station App', null,
         new Date(2017, 6, 1), new Date(2017, 6, 15), null, 0, null],
        ['10', 'IoT App #2: Home Automation App', null,
         new Date(2017, 6, 15), new Date(2017, 6, 30), null, 0, null],
        ['11', 'IoT App #3: Plant Watering System', null,
         new Date(2017, 7, 1), new Date(2017, 7, 15), null, 0, null],
        ['12', 'IoT App #4: Basement Flood Detector', null,
         new Date(2017, 7, 15), new Date(2017, 7, 30), null, 0, null],
      ]);

      var options = {
        height: 400,
        gantt: {
          trackHeight: 30,
           defaultStartDateMillis: new Date(2017, 2, 15)
        }
      };

      var chart = new google.visualization.Gantt(document.getElementById('chart_div'));

      chart.draw(data, options);
    }
  </script>
</head>

<body>

    
    <!-- Page Content -->
    <div class="container">

        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Application for GSoC 2017 | <span style="text-transform: capitalize;">Thilanka Munasinghe</span> <br/>
                    <small ><span style="text-transform: capitalize;">IoT: Android Things Integration on the MIT App Inventor</span></small>
                </h1>
                <br/>
                <h4><span style="text-transform: capitalize;">This proposal is available at:</span> <span style="text-transform: lowercase">http://thilankam.github.io/gsoc17.html</span></h4>
            </div>
        </div>
        <hr/>
        <!-- /.row -->

      <div class="row" >
            <div class="col-md-12">
            <h2><span id="0">Proposal Outline</span></h2>
            <ul>
              <li><a href="#1">Interest in App Inventor</a></li>
              <li><a href="#2">Interest in introductory programming</a></li>
              <li><a href="#3">Proposed summer project (IoT: Android Things Integration On The MIT App Inventor)</a>
                <ul>
                  <li><a href="#31">Why me?</a></li>
                  <li><a href="#32">Benefit to MIT App Inventor</a></li>
                  <li><a href="#33">Project Overview</a>
                  <ul>                  
                    <li><a href="#331">Supporting the Basic IoT Capabilities from MIT App Inventor</a></li>
                    <li><a href="#332">Testing and Evaluating the Component Developed</a></li>
                    <li><a href="#333">Implementation Plan</a></li>
                  </ul>
                  </li>
                </ul>
              </li>
              <li><a href="#4">Experience with the development tools</a></li>
              <li><a href="#5">Experience with teams, online developer communities and large code bases</a></li>
              <li><a href="#6">Non Trivial Apps Developed</a></li>
              <li><a href="#7">App Inventor Design Challenge</a></li>
            </ul>
                
            </div>
      </div>  

<hr>
        <div class="row" >
            <div class="col-md-12">
                <h2><span id="1">Interest in App Inventor</span></h2>
                <p>I first learnt of MIT App Inventor when I was a visiting student at MIT in 2014. I have been using MIT App Inventor ever since: to prototype android apps for my research, and as the introductory mobile app development platform in the Android Programming class I teach at WVU.</p>

                <p>Last summer I was lucky to be part of Google Summer of Code 2016, where I successfully completed the <a href="https://summerofcode.withgoogle.com/archive/2016/projects/4758962813534208/">Raspberry Pi integration on the MIT App Inventor platform</a>. I would like to contribute again this summer and extend the IoT capabilities using the Android Things SDK. </p> 
            </div>
        </div>
        <!-- /.row -->


        <div class="row" id="2">
            <div class="col-md-12">
                <h2>Interest in introductory programming</h2>
                <p>I have been teaching at the WVU LaunchLab as a codelab instructor for the past 2.5 years. I teach students who do not have prior mobile coding knowledge or even any programming experience to develop their own mobile apps. In my classroom sessions, I have successfully utilized MIT App Inventor to teach the fundamentals before delving into the Android Platform internals.</p>

                <p> Here are some of the lesson plans I have used, some of which modified from the official MIT App Inventor tutorials: <a href="http://thilankam.github.io/codelab/mit_ai/1.pdf">lesson 1</a>, <a href="http://thilankam.github.io/codelab/mit_ai/2.pdf">lesson 2</a>, <a href="http://thilankam.github.io/codelab/mit_ai/3.pdf">lesson 3</a>, <a href="http://thilankam.github.io/codelab/mit_ai/4.pdf">lesson 4</a>, and <a href="http://thilankam.github.io/codelab/mit_ai/5.pdf">lesson 5</a>.</p>
            </div>
        </div>
        <!-- /.row -->


        <div class="row" id="3">
            <div class="col-md-12">
                <h2>Proposed summer project <br/><span style="text-transform: capitalize;">(IoT: Android Things Integration On The MIT App Inventor)</span></h2>
                <p>I am interested in the <a href="https://github.com/mit-cml/appinventor-sources/wiki/Projects-GSoC-17#internet-of-things">Internet of Things project</a> listed on the appinventor-sources wiki. Specifically, I would like to incorporate the Android Things SDK to MIT App Inventor Platform. Android Things  was unveiled fairly recently (Developer Preview 1 in December 2016, and Developer Preview 2 in February 2017). Thus, application development utilizing Android Things has just begun by experienced developers, but using the the SDK is not yet simple enough for a typical MIT App Inventor user such as a high school student.</p>
                <p>Therefore, the goal of this Summer of Code 2017 project is to investigate ways to integrate the Google Things API features into MIT App Inventor, and contribute an MIT App Inventor extension component supporting Android Things to build IoT Android apps to the vast number of people worldwide.</p>

                <br/>
        
                <h3 id="31">Why me?</h3>

                <p>I completed my bachelors in Aerospace Engineering, my Masters in Mechanical Engineering, and I am currently pursuing a second Masters in Applied Mathematics at the West Virginia University. Coming from a multi disciplinary background, IoT is a special interest of mine. I have done several IoT hobbyist projects for fun and as part of the android programming classes I teach at WVU. In addition, I have been using App Inventor in my introductory app development classes at WVU codelab. As part of my graduate studies, I have conducted lot of research on autonomous vehicles, which has even led to several journal publications as listed in <a href="http://thilankam.github.io/Thilanka_Munasinghe_Resume.pdf">my resume</a>.</p> 
                <p>More importantly, as was mentioned before, I contributed the <a href="https://summerofcode.withgoogle.com/archive/2016/projects/4758962813534208/">Raspberry Pi Integration for MIT App Inventor</a> last summer. The experience from working on that project has situated me to be the best candidate to work on the Android Things integration on MIT App Inventor. Through this Google Summer of Code project, I hope to contribute good quality code to the MIT App Inventor project, and also hope this project will result in a research worthy outcome that will lead to a publication.</p>

                <h3 id="32">Benefit to MIT App Inventor</h3>

                <p>Since there are many famously known starter kits (Adafruit Project Kit, Sparkfun Project Kit) as featured in the official Google Android Things developer kits site, a direct integration of the Android Things  will open the door for large number of school students, novel experimentalists, enthusiasts, and hobbyists to be able to do IoT projects along with App Inventor. Android Things also support different boards including Raspberry Pi, Intel Edison, Intel Joule, and NXP Pico via a common interface. Thus, the integration will supersede the capabilities offered by previous <a href="http://appinventor.mit.edu/explore/stories/voice-controlled-arduino-beginners.html">Arduino</a> and <a href="https://summerofcode.withgoogle.com/archive/2016/projects/4758962813534208/">Raspberry Pi</a> integrations on MIT App Inventor.</p> 

                <p>As was mentioned before, the Android Things API is relatively new compared to other APIs. The Developer Preview 2 was only released in February 2017 for developers and early adopters to use for development and compatibility testing on supported hardware platforms. If MIT App Inventor becomes one of the early adopters and supporting platforms for the Android Things, it will hopefully lead to many interesting easily programmable DIY projects that are integrated with mobile phones.</p>

                <h4>Special Note about Android Things License</h4>
                <p>Android Things is part of the Android SDK, thus licensed under Apache 2. Therefore it will be compatible with the App Inventor license. This will enable the App Inventor user community to develop Android based IoT applications without any licensing implications, as was the case with integrating with Raspberry Pi, since the Raspberry Pi integration software relied on a GPL licensed Pi4J library.</p>

                <h3 id="33">Project Overview</h3>

                <p>Internet of Things (IoT) is a fast growing field of where sensors are monitoring appliances, actuators, and machines, as well as controlling them remotely, over the Internet. It has helped to create pervasive smart things that integrate computation into everyday environments and link them through Web and Cloud applications. This evolution is impacting our lifestyle and thus quickly and easily creating applications to leverage full potential is of paramount importance. This project is an effort to realize that goal, by integrating the Android Things SDK on the MIT App Inventor platform.</p>

                <p> I am proposing to develop an MIT App Inventor Extension that integrates Android Things. This project will be different from the last Summer of Code project I did on <a href="https://summerofcode.withgoogle.com/archive/2016/projects/4758962813534208/">integrating Raspberry Pi on the App Inventor</a>, because the Android Things API will allow a generic interface to several different types of IoT platforms, including Arduino, Raspberry Pi, NXP Pico, Intel Edison and Joule.</p>

                <h4 id="331">Supporting the Basic IoT Capabilities from MIT App Inventor</h4>

                <p>Android Things extends the core Android framework with additional APIs that allow apps to integrate with new types of hardware not found on mobile devices. Apps for embedded devices bring developers closer to hardware peripherals and drivers than phones and tablets. However, support for designing apps that extend the capabilities of IoT is not yet fully supported in MIT App Inventor in a device agnostic manner (the only available integrations being the <a href="http://appinventor.mit.edu/explore/stories/voice-controlled-arduino-beginners.html">Arduino</a> and the <a href="https://summerofcode.withgoogle.com/archive/2016/projects/4758962813534208/">Raspberry Pi</a> integration I did last summer). This project will aim to bridge that gap by integrating the the Android Things API to MIT App Inventor.</p>

                <p>The specific goals of this project is as follows:
                <li><b>Control Devices</b> attached to a given GPIO pin.</li>
                <li><b>Serial communication in Device</b> to a display port; for e.g. with UART (Serial/RS232) or SPI (Serial Peripheral Interface).</li>
                <li><b>Integrate Communication Protocol</b> capabilities with the <a href="http://mqtt.org/">MQTT</a> protocol and <a href="https://developers.google.com/weave/">Google Weave</a>.</li>
                </p>

                <p>Based on the above criteria, the necessary properties and methods will be added to the MIT AI Things Extension Component.</p>

                <h4 id="332">Testing and Evaluating the Component Developed</h4>

                <p>Since IoT applications space is very broad, I would like to develop several sample applications using the newly created Things Extension component. I have identified two different applications that I can develop. I am hoping to take an iterative approach to refine the component as new requirements get elicited when these sample apps are created.
                <ul>
                  <li><b>Weather Station App</b>
                  </li>
                  <li><b>Home Automation App</b>
                  </li>
                  <li><b>Plant Watering System</b>
                  </li>
                  <li><b>Basement/Storage Unit Flood Detector</b>
                  </li>
                </ul>
                </p>

               <h4 id="333">Implementation Plan</h4>

               <p>The following diagram shows the rough time-line I have allocated to various aspects of the project. This is by no means the final time allocation, and with the guidance of the mentors I hope to update this.</p>

               <p><div id="chart_div"></div></p>

            </div>
        </div>
        <!-- /.row -->

        <br/>
        <br/>
        
        <div class="row" id="4">
            <div class="col-md-12">
                <h2>Experience with the development tools</h2>
                
                <h3>Javascript</h3>
                <p>The Javascript project that I am the most proud of is <a href="http://thilankam.github.io/flightR/">FlightR</a>. I completed this project as part of a hackathon, and <a href="http://traveldatahack.devpost.com/submissions/18191-flightr">won the Most Technically Interesting Project Award</a> at the Big Travel Data Hackathon 2013, organized by Hack Reduce. The project uses Javascript and the d3.js library to visualize actual flight ticket prices and the search results for tickets in a given time period. It is designed to be user friendly and interactive! The tool provides a windowing method to correlate the date of the flight to the price and the time of the day it was taken. (<a href="http://thilankam.github.io/flightR/crossfilter.js">source code</a>)</p>

                <h3>Android Development with the Java SDK</h3>
                <p>I was an intern android developer for <a href="http://www.mylingoapp.com/">MyLingoApp</a>, a mobile app that lets movie goers enjoy their theater experience in their language of choice. As part of this internship, I got the opportunity to work on Android Material Design, downloading large file sizes, and Android NDK for audio syncing. Furthermore, I have also developed, though not yet fully completed, an android app for making Selfie Rap Videos (<a href="https://github.com/thilankam/SwayangVideo">source code</a>).</p>

            </div>
        </div>
        <!-- /.row -->

        <div class="row" id="5">
            <div class="col-md-12">
                <h2>Experience with teams, online developer communities and large code bases</h2>
                <p>Last summer I was able to comfortably navigate the App Inventor code base, and understand the different pieces to successfully complete the Raspberry Pi integration (many thanks to my mentor William Byrne for his help during that ramp up phase!). I am much more comfortable with App Inventor now, and I believe I should be able to start working on my project from day one.</p>            </div>
        </div>
        <!-- /.row -->

        <div class="row" id="6">
            <div class="col-md-12">
                <h2>Non Trivial Apps Developed</h2>

                <h4>Sample Apps using the MIT App Inventor Raspberry Pi Components</h4>
                <p>I have created two samples apps to test the Raspberry Pi Components that I contributed to MIT App Inventor last summer. The first app is a Remote Controlled Home Appliance such as a light that can be remotely controlled with an MIT App Inventor app. The second app is Sensor Controlled Appliance, that will turn on or off based on a certain sensor input. Please see the comprehensive <a href="https://docs.google.com/document/d/18Hw8aHbgDUwOiZtSafO9H7iBKqlVSBiG41pkZczXeu4/edit?usp=sharing">documentation</a> for more details.</p>

                <h4>I am in Class</h4>
                <p>An app that puts the phone to silent mode as soon as the user toggles a switch, or enters a classroom as specified by a certain geo fence. For any message that is received during the period, and automatic message as customized by the user will be sent.</p>
                <p>| <a href="http://thilankam.github.io/appInventorProjects/IamInClassRoom/IamInClassRoom.aia">AIA</a> | <a href="http://thilankam.github.io/appInventorProjects/IamInClassRoom/IamInClassRoom.apk">APK</a> |</p>
                
                <h4>Record My Location</h4>
                <p>This app helps drivers remember where they parked in a busy parking lot. Simply press remember location, and upon return to the parking lot, the app will display the parked location on a map.</p>
                <p>| <a href="http://thilankam.github.io/appInventorProjects/RecordMyLocation/RecordMyLocation.aia">AIA</a> | <a href="http://thilankam.github.io/appInventorProjects/RecordMyLocation/RecordMyLocation.apk">APK</a> |</p>
                
                <h4>Let's Go Mountaineers</h4>
                <p>A simple app to record "cheering chants" during big game day using text to speech, and play back to create nice sound effects when the played back in large groups.</p>
                <p>| <a href="http://thilankam.github.io/appInventorProjects/letsGo/GoMountaineers.aia">AIA</a> | <a href="http://thilankam.github.io/appInventorProjects/letsGo/GoMountaineers.apk">APK</a> |</p>
                
                <h4>Mesh WV Game</h4>
                <p>A simple game.</p>
                <p>| <a href="http://thilankam.github.io/appInventorProjects/meshWVgame/MeshWVgame.aia">AIA</a> | <a href="http://thilankam.github.io/appInventorProjects/meshWVgame/MeshWVgame.apk">APK</a> |</p>
 
            </div>
        </div>
        <!-- /.row -->

        <div class="row" id="7">
            <div class="col-md-12">
                <h2>App Inventor Design Challenge</h2>
                <h3>useFront Property</h3>
                <p>According to <a href="https://github.com/mit-cml/appinventor-sources/issues/180">this issue</a>, "[the useFront] property relied on an undocumented feature of the android camera system". This feature has been removed from nearly all androids, including older ones including 2.3 devices. There exists no intent to specify which camera to use, and the user should decide what camera to use. Furthermore, according to <a href="https://github.com/mit-cml/appinventor-sources/pull/335#issuecomment-86684286">this comment</a>, App Inventor has always used an intent to launch the external camera app,
and that intent does not have any way of specifying, and it definitely
cannot query device state. Therefore, this property was removed from the AI design and block interfaces.</p>

                <h3>Design Solution</h3>
                <p>Properties To Be Added: <b>frontCamera</b>, <b>backCamera</b>, (and <b>externalCamera</b> if connected).</p>
                <p>Methods To Be Added: <b>IsSelected</b>, TakePicture (already there)</p>

                <h3>Implementation</h3>
                <p>Due to the limitations across different APIs and devices in how selecting the camera upon intent passing, we might have to rewrite the existing Camera component. The source code for this component is available at: <a href="https://github.com/mit-cml/appinventor-sources/blob/master/appinventor/components/src/com/google/appinventor/components/runtime/Camera.java">appinventor/components/src/com/google/appinventor/components/runtime/Camera.java</a>.</p>

                <p>According to the <a href="http://developer.android.com/reference/android/hardware/Camera.html#open(int)">Camera API documentation</a>, we can utilize the <b>open(int id)</b> method of the <b>Camera</b> class, where <b>id</b> refers to the camera the user has specified in the property list.</p>

                <p>The SimpleFunction <b>TakePicture()</b> in the existing Camera AI component should be modified such that it would call <b>camera = Camera.open(findFrontFacingCamera())</b> if the <b>frontCamera</b> property is set, where the <b>findFrontFacingCamera</b> is implemented as follows. Then we can call the Android API's <b>camera.takePicture()</b> method instead of launching the camera app via the intent.</p>
                <p>Note: This is by no means the complete code, and I probably have overlooked some important things, but I sure hope this is in the right direction to achieve what is requested in the challenge. </p>

                <pre>
                    
                    private int findFrontFacingCamera() {
                        int cameraId = -1;
                        // Search for the front facing camera
                        int numberOfCameras = Camera.getNumberOfCameras();
                        for (int i = 0; i < numberOfCameras; i++) {
                          CameraInfo info = new CameraInfo();
                          Camera.getCameraInfo(i, info);
                          if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
                            cameraId = i;
                            break;
                          }
                        }
                        return cameraId;
                      }
                </pre>
                
            </div>
        </div>
        <!-- /.row -->

        
        <hr>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>CC-BY Thilanka Munasinghe 2017</p>
                </div>
            </div>
            <!-- /.row -->
        </footer>

    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

</body>

</html>
